import React from 'react';
import {View, TextInput, Pressable,StyleSheet, TextInputProps, ViewStyle } from 'react-native';
import Svg, { Path } from 'react-native-svg';

interface BaraSearchProps extends TextInputProps {
  searchQuery: string;
  onSearch: (text: string) => void;
  containerStyle?: ViewStyle;
  inputStyle?: TextInputProps['style'];
  iconSize?: number;
  iconColor?: string;
  clearIconSize?: number;
  clearIconColor?: string;
}

const MagnifyIcon: React.FC<{ size: number; color: string }> = ({size, color}) => (
  <Svg width={size} height={size} viewBox="0 0 491.517 491.517">
    <Path
      d="M395.023,155.526c-13.283,0-26.18,2.832-38.434,8.19c-13.287-3.428-27.181-1.631-39.13,5.083
      c-9.396-3.772-22.889-8.059-39.215-10.293c-7.942-9.738-19.805-15.504-32.485-15.504c-12.673,0-24.537,5.766-32.478,15.504
      c-16.324,2.234-29.817,6.519-39.212,10.292c-11.963-6.713-25.868-8.516-39.143-5.082c-12.253-5.358-25.149-8.19-38.431-8.19
      C43.29,155.526,0,198.815,0,252.021c0,53.204,43.29,96.494,96.494,96.494c42.801,0,80.36-28.354,92.398-69.251l27.099-20.981
      c9.757-7.559,12.628-20.704,7.715-31.489c2.468-0.938,5.042-1.738,7.65-2.494c4.67,1.735,9.493,2.663,14.402,2.663
      c4.91,0,9.738-0.929,14.406-2.664c2.61,0.756,5.184,1.556,7.648,2.494c-4.915,10.775-2.045,23.924,7.72,31.49l27.095,20.979
      c12.028,40.894,49.583,69.253,92.395,69.253c53.205,0,96.495-43.29,96.495-96.494
      C491.518,198.815,448.228,155.526,395.023,155.526z M174.861,272.706c-9.375,35.595-41.602,60.45-78.367,60.45
      c-44.737,0-81.134-36.397-81.134-81.134s36.397-81.135,81.134-81.135c11.97,0,23.61,2.633,34.597,7.837
      c28.268,13.372,46.537,42.142,46.537,73.298C177.629,258.755,176.699,265.724,174.861,272.706z M271.274,192.533
      c-2.176,7.247-7.419,13.395-14.558,16.641c-7.087,3.225-14.797,3.225-21.915,0c-9.517-4.328-15.667-13.822-15.667-24.187
      c0-5.363,1.597-10.545,4.627-14.977c4.973-7.29,13.193-11.647,21.998-11.647s17.032,4.358,22.005,11.647
      c3.023,4.432,4.62,9.615,4.62,14.977C272.384,187.58,271.999,190.117,271.274,192.533z M395.023,333.156
      c-36.765,0-68.984-24.855-78.359-60.45c-1.838-6.982-2.775-13.935-2.775-20.684c0-31.155,18.27-59.925,46.537-73.298
      c10.988-5.205,22.627-7.837,34.597-7.837c44.737,0,81.135,36.398,81.135,81.135S439.76,333.156,395.023,333.156z"
      fill={color}
    />
    <Path
      d="M96.494,184.469c-37.245,0-67.544,30.307-67.544,67.552s30.3,67.544,67.544,67.544s67.552-30.3,67.552-67.544
      S133.739,184.469,96.494,184.469z M90.359,227.878c-2.485,7.456-10.547,15.517-18.004,18.003
      c-7.457,2.486-11.488-1.544-9.002-9.002c2.485-7.456,10.546-15.52,18.004-18.003C88.814,216.39,92.844,220.419,90.359,227.878z
      M123.905,285.896c-3.573,0-6.469-2.895-6.469-6.469c0-3.572,2.897-6.469,6.469-6.469c3.573,0,6.47,2.897,6.47,6.469
      C130.375,283.002,127.478,285.896,123.905,285.896z"
      fill={color}
    />
    <Path
      d="M395.023,184.469c-37.245,0-67.544,30.307-67.544,67.552s30.3,67.544,67.544,67.544s67.552-30.3,67.552-67.544
      S432.268,184.469,395.023,184.469z M367.616,285.896c-3.572,0-6.469-2.895-6.469-6.469c0-3.572,2.897-6.469,6.469-6.469
      c3.574,0,6.47,2.897,6.47,6.469C374.086,283.002,371.19,285.896,367.616,285.896z M419.168,245.88
      c-7.457-2.485-15.517-10.546-18.004-18.003c-2.485-7.459,1.545-11.488,9.002-9.003c7.457,2.484,15.519,10.547,18.004,18.003
      C430.656,244.338,426.627,248.367,419.168,245.88z"
      fill="#1C4B82"
    />
    <Path
      d="M245.759,167.008c-9.908,0-17.97,8.062-17.97,17.978c0,9.907,8.062,17.97,17.97,17.97c9.915,0,17.977-8.062,17.977-17.97
      C263.736,175.07,255.674,167.008,245.759,167.008z M245.759,195.276c-5.678,0-10.29-4.613-10.29-10.29
      c0-5.678,4.613-10.298,10.29-10.298s10.297,4.62,10.297,10.298C256.056,190.664,251.436,195.276,245.759,195.276z"
      fill="#1C4B82"
    />
  </Svg>
);
const ClearIcon: React.FC<{ size: number; color: string }> = ({size, color}) => (
  <Svg width={size} height={size} viewBox="0 0 16 16">
    <Path
      d="M13.9907,0 C14.8816,0 15.3277,1.07714 14.6978,1.70711 L13.8556,2.54922 C14.421,3.15654 14.8904,3.85028 15.2448,4.60695 C15.8028,5.79836 16.0583,7.109 15.9888,8.42277 C15.9193,9.73654 15.5268,11.0129 14.8462,12.1388 C14.1656,13.2646 13.2178,14.2053 12.0868,14.8773 C10.9558,15.5494 9.67655,15.9322 8.3623,15.9918 C7.04804,16.0514 5.73937,15.7859 4.55221,15.2189 C3.36505,14.652 2.33604,13.8009 1.55634,12.7413 C0.776635,11.6816 0.270299,10.446 0.0821822,9.14392 C0.00321229,8.59731 0.382309,8.09018 0.928918,8.01121 C1.47553,7.93224 1.98266,8.31133 2.06163,8.85794 C2.20272,9.83451 2.58247,10.7612 3.16725,11.556 C3.75203,12.3507 4.52378,12.989 5.41415,13.4142 C6.30452,13.8394 7.28602,14.0385 8.27172,13.9939 C9.25741,13.9492 10.2169,13.6621 11.0651,13.158 C11.9133,12.6539 12.6242,11.9485 13.1346,11.1041 C13.6451,10.2597 13.9395,9.30241 13.9916,8.31708 C14.0437,7.33175 13.8521,6.34877 13.4336,5.45521 C13.178,4.90949 12.8426,4.40741 12.4402,3.96464 L11.7071,4.69779 C11.0771,5.32776 9.99996,4.88159 9.99996,3.99069 L9.99996,0 L13.9907,0 Z M1.5,4 C2.05226,4 2.5,4.44772 2.5,5 C2.5,5.55229 2.05226,6 1.5,6 C0.947694,6 0.5,5.55228 0.5,5 C0.5,4.44772 0.947694,4 1.5,4 Z M3.75,1.25 C4.30226,1.25 4.75,1.69772 4.75,2.25 C4.75,2.80229 4.30226,3.25 3.75,3.25 C3.19769,3.25 2.75,2.80228 2.75,2.25 C2.75,1.69772 3.19769,1.25 3.75,1.25 Z M7,0 C7.55226,0 8,0.447716 8,1 C8,1.55229 7.55226,2 7,2 C6.44769,2 6,1.55229 6,1 C6,0.447716 6.44769,0 7,0 Z"
      fill={color}
    />
  </Svg>
);

const BaraSearch: React.FC<BaraSearchProps> = ({ searchQuery, onSearch, containerStyle, inputStyle, iconSize = 24, iconColor = '#1C4B82',
  clearIconSize = 12, clearIconColor = '#000', placeholder = 'căutați..', placeholderTextColor = '#1C4B82', keyboardType = 'default',
  autoCorrect = false, autoCapitalize = 'none',
})=> {
  return (
    <View style={[styles.container, containerStyle]}>
    <MagnifyIcon size={iconSize} color={iconColor} />

    <TextInput
      style={[styles.input, inputStyle]}
      value={searchQuery}
      onChangeText={onSearch}
      placeholder={placeholder}
      placeholderTextColor={placeholderTextColor}
      keyboardType={keyboardType}
      autoCorrect={autoCorrect}
      autoCapitalize={autoCapitalize}
    />

    {searchQuery.length > 0 && (
      <Pressable onPress={() => onSearch('')} style={styles.clearButt}>
        <ClearIcon size={clearIconSize} color={clearIconColor} />
      </Pressable>
    )}
  </View>
);
};

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#F7FBFE',
    borderRadius: 22,
    borderWidth: 1,
    borderColor: '#1C4B82',
    paddingHorizontal: 8,
    height: 50,
    width: '95%',
    alignSelf: 'center',
  },
  input: {
    flex: 1,
    fontSize: 16,
    color: '#000',
    marginLeft: 6,
  },
  clearButt: {
    marginLeft: 6,
    padding: 4,
  },
});
export default BaraSearch;

